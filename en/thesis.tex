%%% The main file. It contains definitions of basic parameters and includes all other parts.

%% Settings for single-side (simplex) printing
% Margins: left 40mm, right 25mm, top and bottom 25mm
% (but beware, LaTeX adds 1in implicitly)
\documentclass[12pt,a4paper]{report}
\setlength\textwidth{145mm}
\setlength\textheight{247mm}
\setlength\oddsidemargin{15mm}
\setlength\evensidemargin{15mm}
\setlength\topmargin{0mm}
\setlength\headsep{0mm}
\setlength\headheight{0mm}
% \openright makes the following text appear on a right-hand page
\let\openright=\clearpage

%% Settings for two-sided (duplex) printing
% \documentclass[12pt,a4paper,twoside,openright]{report}
% \setlength\textwidth{145mm}
% \setlength\textheight{247mm}
% \setlength\oddsidemargin{14.2mm}
% \setlength\evensidemargin{0mm}
% \setlength\topmargin{0mm}
% \setlength\headsep{0mm}
% \setlength\headheight{0mm}
% \let\openright=\cleardoublepage

%% Generate PDF/A-2u
\usepackage[a-2u]{pdfx}

%% Character encoding: usually latin2, cp1250 or utf8:
\usepackage[utf8]{inputenc}

%% Prefer Latin Modern fonts
\usepackage{lmodern}

%% Further useful packages (included in most LaTeX distributions)
\usepackage{amsmath}        % extensions for typesetting of math
\usepackage{amsfonts}       % math fonts
\usepackage{amsthm}         % theorems, definitions, etc.
\usepackage{bbding}         % various symbols (squares, asterisks, scissors, ...)
\usepackage{bm}             % boldface symbols (\bm)
\usepackage{graphicx}       % embedding of pictures
\usepackage{fancyvrb}       % improved verbatim environment
\usepackage{natbib}         % citation style AUTHOR (YEAR), or AUTHOR [NUMBER]
\usepackage[nottoc]{tocbibind} % makes sure that bibliography and the lists
			    % of figures/tables are included in the table
			    % of contents
\usepackage{dcolumn}        % improved alignment of table columns
\usepackage{booktabs}       % improved horizontal lines in tables
\usepackage{paralist}       % improved enumerate and itemize
\usepackage[usenames]{xcolor}  % typesetting in color

%%% Basic information on the thesis

% Thesis title in English (exactly as in the formal assignment)
\def\ThesisTitle{Extracting Information from Database Modeling Tools}

% Author of the thesis
\def\ThesisAuthor{Denis Drobný}

% Year when the thesis is submitted
\def\YearSubmitted{2019}

% Name of the department or institute, where the work was officially assigned
% (according to the Organizational Structure of MFF UK in English,
% or a full name of a department outside MFF)
\def\Department{Department of Distributed and Dependable Systems}

% Is it a department (katedra), or an institute (ústav)?
\def\DeptType{Department}

% Thesis supervisor: name, surname and titles
\def\Supervisor{RNDr. Pavel Parízek, Ph.D.}

% Supervisor's department (again according to Organizational structure of MFF)
\def\SupervisorsDepartment{Department of Distributed and Dependable Systems}

% Study programme and specialization
\def\StudyProgramme{Computer Science}
\def\StudyBranch{Programming and Software Systems}

% An optional dedication: you can thank whomever you wish (your supervisor,
% consultant, a person who lent the software, etc.)
\def\Dedication{%
Dedication.
}

% Abstract (recommended length around 80-200 words; this is not a copy of your thesis assignment!)
\def\Abstract{%
Data lineage is a way of showing how information flows through complicated software systems. If the given system is a database, tables and columns are visualized along with SQL transformations of the stored data. However, this picture may be difficult to understand for people with weaker technical background, as database objects usually obey naming conventions and do not necessarily represent something tangible. To improve lineage comprehension, we developed a software called Metadata Extractor that on one hand brings the further description of the database objects, as well as introduces a whole new perspective on data in a system through business lineage aimed for non-technical users. The additional metadata enriching data lineage is extracted from data modeling tools, such as ER/Studio and PowerDesigner, that are widely used in the database design process. 
The solution extends the Manta Flow lineage tool while taking advantage of its features at the same time. \\
}

% 3 to 5 keywords (recommended), each enclosed in curly braces
\def\Keywords{%
{Data Lineage}, {Data Modeling}, {Database Architecture}, {Metadata}
}

%% The hyperref package for clickable links in PDF and also for storing
%% metadata to PDF (including the table of contents).
%% Most settings are pre-set by the pdfx package.
\hypersetup{unicode}
\hypersetup{breaklinks=true}

% Definitions of macros (see description inside)
\include{macros}

% Title page and various mandatory informational pages
\begin{document}
\sloppy
\include{title}

%%% A page with automatically generated table of contents of the bachelor thesis

\tableofcontents

%%% Each chapter is kept in a separate file
\include{preface}
\include{on_database_background}
\include{modeling_tools}
\include{solution_design}
\include{implementation}
\include{epilog}

%%% Bibliography
\include{bibliography}

%%% Figures used in the thesis (consider if this is needed)
\listoffigures

%%% Tables used in the thesis (consider if this is needed)
%%% In mathematical theses, it could be better to move the list of tables to the beginning of the thesis.
%\listoftables

%%% Abbreviations used in the thesis, if any, including their explanation
%%% In mathematical theses, it could be better to move the list of abbreviations to the beginning of the thesis.
\chapwithtoc{List of Abbreviations}

ER \tab Entity-Relationship \\ 
EER \tab Enhanced-entity-Relationship \\
CDM \tab Conceptual Data Model \\
LDM \tab Logical Data Model \\
PDM \tab Physical Data Model \\


%%% Attachments to the bachelor thesis, if any. Each attachment must be
%%% referred to at least once from the text of the thesis. Attachments
%%% are numbered.
%%%
%%% The printed version should preferably contain attachments, which can be
%%% read (additional tables and charts, supplementary text, examples of
%%% program output, etc.). The electronic version is more suited for attachments
%%% which will likely be used in an electronic form rather than read (program
%%% source code, data files, interactive charts, etc.). Electronic attachments
%%% should be uploaded to SIS and optionally also included in the thesis on a~CD/DVD.
%%% Allowed file formats are specified in provision of the rector no. 72/2017.
\appendix
\chapter{Attachments}

\section{Building}
\label{build}

The build process of Metadata Extractor is ensured through Maven with dependencies specified with its pom.xml files.
However, in order to build Metadata Extractor "secret" dependencies owned by MANTA are needed. Otherwise, the project will not compile successfully. 
Also in order to gain the whole functionality of our tool, a context provided by Manta Flow's database extractors and post-processing on Manta server, where the interpolation takes place, and visualization of data lineage which is also part of the server's functionality is needed. 
There is a command line user interface putting all the parts together and must be backed by Manta server with a graph database that is running user interface as well. The crucial parts of Manta Flow though cannot be built without having access to MANTA's code repository.

Even with access to the repository, Manta Flow is proprietary software and running its products requires a valid license.

Thus only those jar files that are needed for running tests are attached. They cannot be rebuilt by a user.


The reverse-engineering tool can be built using Maven.



\section{User Documentation}

To run Metadata Extractor the prerequisite is to have Java 8 on a computer. \\
As we mentioned in \Cref{build} with this work come attached only files needed to demonstrate functionality on tests due to licensing of Manta Flow product.\\ 
In order to run these tests, a user needs to have Apache Maven installed on his computer. \\ 
Then he runs "mvn test" command from the directory containing the top-level aggregating pom.xml.

The reverse-engineering 

\section{Cooperation with Manta Flow}

In the case a user has access to running Manta Flow server and command line interface (CLI) with corresponding licenses, the full functionality of Metadata Extractor can be manifested.

The CLI has an aggregate input directory, which is further divided by technologies.
Subdirectories "erstudio" and "powerdesigner" are located in the input folder.  
Both have the same following layout: 
They contain input systems, such a system is a logical group of modeling files to be processed.
A system consists of two items - one is a folder containing the models from which metadata will get extracted, the second one is a .ini file, where connection details paired with physical models are defined.

Each system of models that has to be processed is specified by its .properties file in manta-flow-cli/scenarios/etc/erstudio, manta-flow-cli/scenarios/etc/powerdesigner respectively. 
For each input system, a property file specifying the name of the system folder to be handled by Metadata Extractor must be present. Templates of such property files can be found at the locations. \\ 

To proceed with the extraction, a user runs one of the executable files provided \textunderscore run.sh for Unix-like, \textunderscore run.bat for Windows machines respectively. In order to achieve the full functionality of Metadata Extractor, it is highly recommended to let analyze databases corresponding to captured in physical models by Manta Flow as well.


\section{Full List of Modeling Tools Metadata}
\label{full_list_metadata}

\subsubsection{Conceptual \& Logical Data Model}

\subsubsection{ER/Studio}

\subsubsection{CDM}

ER/Studio does not support conceptual data models.

\subsubsection{LDM}

\begin{itemize}
	\item \entityname{Owner}
	\item \entityname{Entity}
	\begin{itemize}
		\item Name 
		\item Attributes 
		\item Definition
		\item Note
		\item Where Used
		\item User-Defined Mappings
		\item Owner
		\subsubsection{Properties We Will Not Extract}
		\item Permissions 
		\item Keys 
		\item Relationships 
		\item Constraints 
		\item Naming Standards 
		\item Data Lineage
		\item Security Information
		\item Attachment Bindings
	\end{itemize}
	\item \entityname{Attribute}
	\begin{itemize}
		\item Name
		\item Definition
		\item Notes
		\item Where Used
		\item User-Defined Mappings
		\subsubsection{Properties We Will Not Extract}
		\item Datatype
		\item Default
		\item Rule/Constraint
		\item Reference Values
		\item Naming Standards
		\item Compare Options
		\item Data Lineage
		\item Security Information
		\item Attachment Bindings
		\item Data Movement Rules
	\end{itemize}
	\subsubsection{Objects We Will Not Extract}
	\begin{itemize}
		\item \entityname{Relationship}
	\end{itemize}
\end{itemize}


\subsubsection{PowerDesigner}

Conceptual and logical data models in PowerDesigner have so much in common that we will propose unified view on what may be stored in them. The properties/object that are specific for either of them are marked with information in brackets saying "CDM/LDM only".

\subsubsection{CDM \& LDM}

\begin{itemize}
	\item \entityname{Data Item} (CDM only)
	\begin{itemize}
		\item Name
		\item Code 
		\item Comment
		\item Definition
		\item Annotation
		\item Keywords
		\subsubsection{Properties We Will Not Extract}
		\item Data type
		\item Length
		\item Precision
		\item Domain
		\item Stereotype
	\end{itemize}
	\item \entityname{Entity}
	\begin{itemize}
		\item Name 
		\item Attributes
		\item Code 
		\item Comment
		\item Definition
		\item Annotation
		\item Keywords
		\item Parent Entity
		\item Dependencies
		\subsubsection{Properties We Will Not Extract}
		\item Number
		\item Generate
		\item Identifiers
		\item Rules
		\item Stereotype
	\end{itemize}
	\item \entityname{Attribute}
	\begin{itemize}
		\item Name 
		\item Code 
		\item Comment
		\item Definition
		\item Annotation
		\item Keywords
		\item Parent Entity
		\item Dependencies
		\subsubsection{Properties We Will Not Extract}
		\item Data type 
		\item Length 
		\item Precision
		\item Domain
		\item Primary Identifier
		\item Displayed
		\item Mandatory
		\item Foreign identifier (LDM only)
		\item Standard Checks
		\item Additional Checks
		\item Rules
		\item Stereotype
	\end{itemize}
	\item \entityname{Inheritance}
	\begin{itemize}
		\item Parent Entity
		\item Child Entity
	\end{itemize}
	\subsubsection{Objects We Will Not Extract}
	\item \entityname{Relationship}
	\item \entityname{Identifier}
	\item \entityname{Association and Association Link} (CDM only)
	\item \entityname{Domain}
\end{itemize}

\subsubsection{Physical Data Model}

\subsubsection{ER/Studio}

\begin{itemize}
	\item Type of Data Model (DBMS technology)
	\item \entityname{Schema}
	\begin{itemize}
		\item Name
		\item Tables
	\end{itemize}
	\item \entityname{Table}
	\begin{itemize}
		\item Name
		\item Columns
		\item Schema
		\item Definition
		\item Note
		\item Where Used
		\item User-Defined Mappings
		\subsubsection{Properties We Will Not Extract}
		\item Storage
		\item Dimensions
		\item Properties
		\item DDL
		\item Indexes
		\item Foreign Keys
		\item Partition Columns
		\item Distribute Columns
		\item Distribution
		\item Organization
		\item Partitions
		\item Overflow
		\item Constraints
		\item Dependencies
		\item Capacity Planning
		\item Permissions
		\item PreSQL \& Post SQL
		\item Naming Standards
		\item Compare Options
		\item Data Lineage
		\item Security Information
		\item Attachment Bindings
	\end{itemize}
	\item \entityname{Column}
	\begin{itemize}
		\item Name
		\item Definition
		\item Notes
		\item Where Used
		\item User-Defined Mappings
		\subsubsection{Properties We Will Not Extract}
		\item Datatype
		\item Default
		\item Reference Values
		\item Naming Standards
		\item Compare Options
		\item LOB Storage
		\item Data Lineage
		\item Security Information
		\item Attachment Bindings
		\item Data Movement Rules
	\end{itemize}
	\subsubsection{Objects We Will Not Extract}
	\begin{itemize}
		\item \entityname{View}
	\end{itemize}
\end{itemize}

\subsubsection{PowerDesigner}

\begin{itemize}
	\item \entityname{Table}
	\begin{itemize}
		\item Name 
		\item Columns
		\item Code 
		\item Comment
		\item Definition
		\item Annotation
		\item Keywords
		\item Schema
		\item Dependencies
		\subsubsection{Properties We Will Not Extract}
		\item Number
		\item Generate
		\item Dimensional type
		\item Type
		\item Indexes
		\item Keys 
		\item Triggers
		\item Procedures
		\item Check 
		\item Physical Options
		\item Preview
		\item Lifecycle 
		\item Stereotype
	\end{itemize}
	\item \entityname{Column}
	\begin{itemize}
		\item Name 
		\item Code 
		\item Comment
		\item Definition
		\item Annotation
		\item Keywords
		\item Table
		\item Dependencies
		\subsubsection{Properties We Will Not Extract}
		\item Data type 
		\item Length 
		\item Precision
		\item Domain
		\item Primary Key
		\item Foreign Key
		\item Sequence
		\item Displayed
		\item With default
		\item Mandatory
		\item Identity
		\item Computed
		\item Column fill parameters
		\item Profile 
		\item Computed Expression
		\item Standard Checks
		\item Additional Checks
		\item Rules
		\item Stereotype
	\end{itemize}
	\item \entityname{User, Group, and Role}
	\subsubsection{Objects We Will Not Extract}
	\item Primary, Alternate, and Foreign Keys 
	\item Indexes
	\item Views
	\item Triggers
	\item Stored Procedures and Functions
	\item Synonyms 
	\item Defaults
	\item Domains
	\item Sequences 
	\item Abstract Data Types
	\item References
	\item View References
	\item Business Rules
	\item Lifecycles
\end{itemize}

\openright
\end{document}
